name: Release Pipeline - Coverage, Versioning & Publishing

on:
  pull_request:
    branches:
      - main
    types: [closed]

permissions:
  contents: write
  pull-requests: read

jobs:
  cd:
    uses: jonathanvanleeuwen/cicd_github/.github/workflows/reusable-cd.yml@main
    with:
      python-version: '3.12'
      package-name: '{{ cookiecutter.project_name }}'
      extra-install-args: '.[dev]'
      # Optional: override coverage path if needed
      # coverage-path: 'custom/path'
      # Optional: skip specific steps by setting to true
      # skip-coverage: false
      # skip-release: false
      # skip-publish: false
    secrets:
      RELEASE_TOKEN: {% raw %}${{ secrets.RELEASE_TOKEN }}{% endraw %}